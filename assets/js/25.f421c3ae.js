(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{379:function(t,a,s){"use strict";s.r(a);var r=s(7),v=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h3",{attrs:{id:"产品形态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#产品形态"}},[t._v("#")]),t._v(" 产品形态")]),t._v(" "),a("p",[t._v("一个看书的应用，可以翻页。")]),t._v(" "),a("h3",{attrs:{id:"场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#场景"}},[t._v("#")]),t._v(" 场景")]),t._v(" "),a("p",[t._v("为了更好的缓存ajax数据，做了比较多的数据缓存，测试发现，使用页面一会过后页面会变卡，在微信浏览器环境下，直接闪退。第一反应是请求太慢，去掉花费时间较长的请求后，依然变卡。所以就做了时间断点测试。")]),t._v(" "),a("h3",{attrs:{id:"过程分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#过程分析"}},[t._v("#")]),t._v(" 过程分析")]),t._v(" "),a("p",[t._v("代码如下：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://suxuewb.cn/wp-content/uploads/2020/12/%E6%88%AA%E5%B1%8F2020-12-22-17.11.18.png",alt:""}})]),t._v(" "),a("p",[t._v("一共有4个时间点：")]),t._v(" "),a("ol",[a("li",[t._v("这整块代码的执行时间：getPageContent")]),t._v(" "),a("li",[t._v("获取源数据的执行时间：getChapterJSON")]),t._v(" "),a("li",[t._v("数组查找方法：chapterJSONfind")]),t._v(" "),a("li",[t._v("对象序列化：JSONstringify")])]),t._v(" "),a("p",[t._v("然后执行翻页操作所得的时间如下：\n"),a("img",{attrs:{src:"https://suxuewb.cn/wp-content/uploads/2020/12/%E6%88%AA%E5%B1%8F2020-12-22-17.53.21.png",alt:""}})]),t._v(" "),a("p",[t._v("一眼可以看出，JSONstringify的时间越来越长，导致第十次交互时，直接页面闪退。\n打印出这个对象后，发现了循环引用，导致内存泄漏")]),t._v(" "),a("h3",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("这些操作都是在微信环境下测试的，在谷歌浏览器上，没有这种现象发生，想必是做过优化，微信的x5内核则会内存泄漏。下次在序列化对象之前务必检查啊～～")])])}),[],!1,null,null,null);a.default=v.exports}}]);